import{s as w}from"./simple-auth.B6DBPb65.js";import"./hoisted.UJltcVt3.js";const a=new URLSearchParams(window.location.search),i=a.get("token"),d=a.get("email");(!i||!d)&&(window.location.href="/login?error=invalid-reset-link");const n=document.getElementById("reset-password-form"),r=document.getElementById("reset-password-btn");n?.addEventListener("submit",async o=>{o.preventDefault();const s=new FormData(n),e=s.get("new_password"),t=s.get("confirm_password");if(e!==t){c("Passwords do not match");return}if(e.length<6){c("Password must be at least 6 characters long");return}const l=r.innerHTML;r.disabled=!0,r.innerHTML=`
      <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12a8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      Resetting Password...
    `;try{await w.resetPassword(d,i,e),u("Password reset successfully! You can now login with your new password."),n.reset(),setTimeout(()=>{window.location.href="/login?message=password-reset-success"},3e3)}catch(m){c(m.message||"Failed to reset password")}finally{r.disabled=!1,r.innerHTML=l}});function u(o){const s=document.getElementById("success-message"),e=document.getElementById("success-text"),t=document.getElementById("error-message");s&&e&&(e.textContent=o,s.classList.remove("hidden"),t&&t.classList.add("hidden"))}function c(o){const s=document.getElementById("error-message"),e=document.getElementById("error-text"),t=document.getElementById("success-message");s&&e&&(e.textContent=o,s.classList.remove("hidden"),t&&t.classList.add("hidden"))}
