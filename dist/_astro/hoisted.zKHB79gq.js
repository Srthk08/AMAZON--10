import{s as l}from"./supabase.ASU9rNY7.js";import"./hoisted.UJltcVt3.js";import"./index.BFAZBQoJ.js";const i=document.getElementById("contact-form"),d=document.getElementById("success-message"),p=document.getElementById("error-message"),u=document.getElementById("error-text");function f(){const e=new URLSearchParams(window.location.search);return{product:e.get("product"),projectType:e.get("project_type"),projectDetails:e.get("project_details"),price:e.get("price")}}async function g(){try{const e=f();if(e.projectType){const o=document.getElementById("project_type");o&&(o.value=e.projectType)}if(e.projectDetails){const o=document.getElementById("message");if(o){let n=decodeURIComponent(e.projectDetails);if(e.product&&(n=`Project: ${decodeURIComponent(e.product)}

${n}`),e.price){const t=decodeURIComponent(e.price);n+=`

Budget: ‚Çπ${t}`}o.value=n}}const{data:{user:s}}=await l.auth.getUser();if(s){const{data:o}=await l.from("profiles").select("*").eq("id",s.id).single();if(o){const n=document.getElementById("first_name"),t=document.getElementById("last_name"),m=document.getElementById("email"),r=document.getElementById("phone"),c=document.getElementById("company");if(n&&o.full_name){const a=o.full_name.split(" ");n.value=a[0]||"",t&&a.length>1&&(t.value=a.slice(1).join(" "))}m&&(m.value=s.email||""),r&&(r.value=o.phone||""),c&&(c.value=o.company_name||"")}}}catch(e){console.error("Error pre-filling form:",e)}}i?.addEventListener("submit",async e=>{e.preventDefault(),d?.classList.add("hidden"),p?.classList.add("hidden");const s=i.querySelector('button[type="submit"]'),o=s.textContent;s.disabled=!0,s.innerHTML=`
      <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      Sending...
    `;try{const n=new FormData(i),t=Object.fromEntries(n),{data:{user:m}}=await l.auth.getUser(),r={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone||null,company_name:t.company||null,project_type:t.project_type,project_details:t.message,message:t.message};console.log("üìù Sending contact data:",r);const{data:c,error:a}=await l.from("contact_submissions").insert([r]).select();if(a)throw console.error("‚ùå Error saving contact message:",a),new Error("Failed to save your message. Please try again.");console.log("‚úÖ Contact message saved successfully:",c),d?.classList.remove("hidden"),i.reset(),await g()}catch(n){console.error("Contact form error:",n),u&&(u.textContent=n.message||"An error occurred while sending your message."),p?.classList.remove("hidden")}finally{s.disabled=!1,s.innerHTML=o}});document.addEventListener("DOMContentLoaded",g);
