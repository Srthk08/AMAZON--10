import{s as c}from"./supabase.DNQg-7fe.js";import"./hoisted.CaEvvjRJ.js";const d=document.getElementById("reset-password-form"),n=document.getElementById("error-message"),e=document.getElementById("error-text"),p=async()=>{const{data:{user:a},error:r}=await c.auth.getUser();return r||!a?(window.location.href="/login?message=Invalid or expired reset link&type=error",!1):!0};p();d?.addEventListener("submit",async a=>{a.preventDefault();const r=new FormData(d),i=r.get("password"),m=r.get("confirm_password");if(n?.classList.add("hidden"),i!==m){e&&(e.textContent="Passwords do not match."),n?.classList.remove("hidden");return}if(i.length<6){e&&(e.textContent="Password must be at least 6 characters long."),n?.classList.remove("hidden");return}const t=d.querySelector('button[type="submit"]'),w=t.textContent;t.disabled=!0,t.innerHTML=`
        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Updating password...
      `;try{const{error:s}=await c.auth.updateUser({password:i});if(s)throw s;typeof window.showToast=="function"&&window.showToast("Password updated successfully! Redirecting to login...","success",3e3),setTimeout(()=>{window.location.href="/login?message=Password updated successfully. Please sign in."},3e3)}catch(s){console.error("Password update error:",s),e&&(e.textContent=s.message||"An error occurred while updating your password."),n?.classList.remove("hidden")}finally{t.disabled=!1,t.textContent=w}});const l=document.getElementById("password"),o=document.getElementById("confirm_password"),u=()=>{o.value&&l.value!==o.value?o.setCustomValidity("Passwords do not match"):o.setCustomValidity("")};l?.addEventListener("input",u);o?.addEventListener("input",u);
