import"./hoisted.CaEvvjRJ.js";const r=document.getElementById("requirements-form"),t=document.getElementById("checkout-btn");function d(){if(!r)return!1;const o=r.querySelectorAll("input[required], textarea[required], select[required]");let e=!0;return o.forEach(a=>{a.value.trim()||(e=!1)}),e}function c(){d()?(t.disabled=!1,t.className="w-full bg-primary-600 hover:bg-primary-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors cursor-pointer",t.textContent="Proceed to Payment",t.onclick=window.proceedToCheckout):(t.disabled=!0,t.className="w-full bg-gray-400 text-white py-3 px-4 rounded-lg font-semibold cursor-not-allowed",t.textContent="Complete Requirements to Proceed",t.onclick=null)}r&&(r.addEventListener("input",c),r.addEventListener("change",c));window.removeFromCart=async o=>{try{if((await fetch("/api/cart/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cartItemId:o})})).ok)window.location.reload();else throw new Error("Failed to remove item")}catch(e){console.error("Error removing item:",e),alert("Error removing item from cart. Please try again.")}};window.proceedToCheckout=async()=>{if(!d()){alert("Please fill in all required fields before proceeding.");return}try{const o=new FormData(r),e=Object.fromEntries(o.entries()),a=document.querySelector("[data-total]"),i=a?parseFloat(a.getAttribute("data-total")||"0"):0,s=await fetch("/api/checkout/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requirements:e,amount:i})});if(s.ok){const{orderId:m,razorpayOrderId:u}=await s.json(),l={key:"rzp_test_9999999999",amount:i*100,currency:"INR",name:"DevExpress",description:"Professional Development Services",order_id:u,handler:function(n){alert("Payment successful! Your order has been confirmed."),window.location.href="/orders"},prefill:{name:e.contact_person||"",email:e.contact_email||"",contact:e.contact_phone||""},theme:{color:"#2563EB"},modal:{ondismiss:function(){console.log("Payment cancelled")}}};if(typeof window.Razorpay>"u"){const n=document.createElement("script");n.src="https://checkout.razorpay.com/v1/checkout.js",n.onload=()=>{new window.Razorpay(l).open()},document.head.appendChild(n)}else new window.Razorpay(l).open()}else throw new Error("Failed to create checkout")}catch(o){console.error("Error creating checkout:",o),alert("Error proceeding to checkout. Please try again.")}};c();
